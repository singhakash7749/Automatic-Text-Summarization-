<!DOCTYPE html>
<html class="m-0" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Summarization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {}
            }
        }
    </script>
</head>
<body class="flex-col m-0 bg-cyan-900 w-screen h-screen justify-center items-center" >
<div class="text-white flex p-4 justify-between">
    <div class="font-bold text-2xl">
        {% if 'username' in session %}
            <h2>Welcome, {{ session['username'] }}!</h2>
        {% else %}
            <h2>Welcome, Guest!</h2>
        {% endif %}
    </div>
    <div class="flex space-x-2">
        {% if 'username' in session %}
            <a class="p-2 flex items-center space-x-1 text-cyan-900 hover:bg-gray-200 bg-white border border-gray-500 font-bold shadow-md rounded-lg"
               href="/logout"><span>Logout</span>
                <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 12H20M20 12L17 9M20 12L17 15" stroke="#1C274C" stroke-width="1.5"
                          stroke-linecap="round"
                          stroke-linejoin="round"></path>
                    <path d="M4 12C4 7.58172 7.58172 4 12 4M12 20C9.47362 20 7.22075 18.8289 5.75463 17"
                          stroke="#1C274C"
                          stroke-width="1.5" stroke-linecap="round"></path>
                </svg>
            </a>
        {% endif %}
        {% if session.get('role') == 'ADMIN' %}
            <button type="button" id="modal-btn"
                    class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg">
                Disable User (Admin)
            </button>
            <div id="modal"
                 class="hidden z-20 absolute top-0 -left-2 w-screen h-screen bg-black bg-opacity-50 flex justify-center items-center">
                <div class="bg-white p-3 flex-col space-y-2 border border-gray-200 shadow-xl rounded-lg w-[20rem] h-[20rem]">
                    <div class="flex w-full justify-between">
                        <h1 class="font-bold text-cyan-900 text-xl">Admin</h1>
                        <button id="modal-close-btn">
                            <svg width="20px" height="20px" viewBox="-0.5 0 25 25" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path d="M3 21.32L21 3.32001" stroke="#000000" stroke-width="1.5"
                                          stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path d="M3 3.32001L21 21.32" stroke="#000000" stroke-width="1.5"
                                          stroke-linecap="round" stroke-linejoin="round"></path>
                                </g>
                            </svg>
                        </button>
                    </div>
                    <div class="flex h-full justify-center items-center">
                        <form method="post" action="/disable_user">
                            <div class="grid grid-cols-1 gap-3 -translate-y-6">
                                <label for="disabled_user"></label>
                                <input id="disabled_user"
                                       class="rounded-lg bg-white p-3 text-black border border-gray-300"
                                       name="disabled_user" placeholder="Username" type="text">
                                <input id="submit" class="bg-cyan-900 rounded-lg p-3 hover:bg-cyan-700 cursor-pointer"
                                       value="Disable" type="submit">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</div>
<div class="flex justify-center items-center">
    <form method="post" action="/summarize"
          class="flex-col gap-2 translate-y-[4rem] shadow-xl bg-white rounded-lg border border-gray-200 border-opacity-30 p-2"
          enctype="multipart/form-data">
        <h2 class="text-cyan-950 mb-4 text-xl font-bold">Workspace</h2>

        <textarea class="rounded-lg w-full overflow-scroll-y p-2 resize-none border border-gray-200" name="input_text"
                  rows="5"
                  cols="50"
                  placeholder="Enter text to summarize"></textarea><br><br>
        <h2 class="text-cyan-950 mb-4 text-xl font-bold">Upload files</h2>
        <div class="flex w-full space-x-2 text-white justify-start">
            <div>
                <label class="w-20 flex item-center pointer-cursor hover:bg-cyan-700 text-white justify-center bg-cyan-900 rounded-lg p-2"
                       for="upload_file">
                    <svg width="30px" height="30px" viewBox="0 0 24 24" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path fill="white"
                              d="M14.2647 15.9377L12.5473 14.2346C11.758 13.4519 11.3633 13.0605 10.9089 12.9137C10.5092 12.7845 10.079 12.7845 9.67922 12.9137C9.22485 13.0605 8.83017 13.4519 8.04082 14.2346L4.04193 18.2622M14.2647 15.9377L14.606 15.5991C15.412 14.7999 15.8149 14.4003 16.2773 14.2545C16.6839 14.1262 17.1208 14.1312 17.5244 14.2688C17.9832 14.4253 18.3769 14.834 19.1642 15.6515L20 16.5001M14.2647 15.9377L18.22 19.9628M18.22 19.9628C17.8703 20 17.4213 20 16.8 20H7.2C6.07989 20 5.51984 20 5.09202 19.782C4.7157 19.5903 4.40973 19.2843 4.21799 18.908C4.12583 18.7271 4.07264 18.5226 4.04193 18.2622M18.22 19.9628C18.5007 19.9329 18.7175 19.8791 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V13M11 4H7.2C6.07989 4 5.51984 4 5.09202 4.21799C4.7157 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.0799 4 7.2V16.8C4 17.4466 4 17.9066 4.04193 18.2622M18 9V6M18 6V3M18 6H21M18 6H15"
                              stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                </label><br>
                <input type="file" class="hidden" id="upload_file" name="file"><br><br>
            </div>
            <div><label
                    class="w-20 flex item-center pointer-cursor hover:bg-cyan-700 text-white justify-center bg-cyan-900 rounded-lg p-2"
                    for="file_pdf">
                <svg width="30px" height="30px" fill="#000000" viewBox="0 0 1920 1920"
                     xmlns="http://www.w3.org/2000/svg">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <g fill-rule="evenodd">
                            <path fill="white"
                                  d="M1185.46.034V564.74h564.705v1355.294H168.99V.034h1016.47ZM900.508 677.68c-16.829 0-31.963 7.567-42.918 21.007-49.807 59.972-31.398 193.016-18.748 272.075 2.823 17.958.452 36.141-7.228 52.518l-107.86 233.223c-7.905 16.942-20.555 30.608-36.592 39.53-68.104 37.835-182.287 89.675-196.066 182.626-4.97 30.268 5.082 56.357 28.574 79.85 15.925 15.133 35.238 22.7 56.245 22.7 81.43 0 132.819-71.717 188.273-148.517 24.62-34.221 61.666-55.229 102.437-60.876 76.349-10.503 167.83-32.527 223.172-46.983 27.897-7.341 56.358-5.534 83.802 3.162 48.565 15.586 66.975 25.073 122.768 25.073 50.371 0 84.818-11.746 101.534-34.447 13.44-16.828 16.715-39.53 10.164-65.619-11.858-42.804-2.033-89.675-133.044-89.675-29.365 0-57.94 2.824-81.77 6.099-36.819 4.97-73.299-10.955-97.016-40.885-32.301-40.546-65.167-88.433-87.981-123.219-16.151-24.508-21.572-53.986-16.264-83.124 15.473-84.706 18.41-147.615-23.492-206.683-17.619-25.186-41.223-37.835-67.99-37.835Zm397.903-660.808 434.936 434.937h-434.936V16.873Z"></path>
                            <path d="M791.057 1297.943c92.273-43.37 275.916-65.28 275.916-65.28-92.386-88.998-145.92-215.04-145.92-215.04-43.257 126.607-119.718 264.282-129.996 280.32"></path>
                        </g>
                    </g>
                </svg>
            </label><br>
                <input type="file" class="hidden" id="file_pdf" name="file_pdf" accept=".txt,.pdf"><br><br>
            </div>
            <div class="h-fit">
                <label class="w-20 flex pointer-cursor item-center hover:bg-cyan-700 text-white justify-center bg-cyan-900 rounded-lg p-2"
                       for="file_docx">
                    <svg width="30px" height="30px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M10 1C9.73478 1 9.48043 1.10536 9.29289 1.29289L3.29289 7.29289C3.10536 7.48043 3 7.73478 3 8V20C3 21.6569 4.34315 23 6 23H10C10.5523 23 11 22.5523 11 22C11 21.4477 10.5523 21 10 21H6C5.44772 21 5 20.5523 5 20V9H10C10.5523 9 11 8.55228 11 8V3H18C18.5523 3 19 3.44772 19 4V9C19 9.55228 19.4477 10 20 10C20.5523 10 21 9.55228 21 9V4C21 2.34315 19.6569 1 18 1H10ZM9 7H6.41421L9 4.41421V7ZM12.952 12.694C12.783 12.1682 12.2198 11.879 11.694 12.048C11.1682 12.217 10.879 12.7802 11.048 13.306L13.298 20.306C13.4309 20.7196 13.8156 21 14.25 21C14.6844 21 15.0691 20.7196 15.202 20.306L16.5 16.2679L17.798 20.306C17.9309 20.7196 18.3156 21 18.75 21C19.1844 21 19.5691 20.7196 19.702 20.306L21.952 13.306C22.121 12.7802 21.8318 12.217 21.306 12.048C20.7802 11.879 20.217 12.1682 20.048 12.694L18.75 16.7321L17.452 12.694C17.3191 12.2804 16.9344 12 16.5 12C16.0656 12 15.6809 12.2804 15.548 12.694L14.25 16.7321L12.952 12.694Z"
                                  fill="#ffffff"></path>
                        </g>
                    </svg>
                </label><br>
                <input type="file" class="hidden" id="file_docx" name="file_docx" accept=".docx"><br><br>
            </div>
        </div>

        <div class="flex -translate-y-8 space-x-1 justify-start">
            <label for="url_input"></label><input type="text" class=" rounded-lg w-full border border-gray-200 p-3"
                                                  id="url_input" name="url_input" placeholder="Enter URL"><br><br>

            <label for="summary_length"></label>
            <input type="number" id="summary_length" class=" rounded-lg w-full border border-gray-200 p-3"
                   placeholder="Summary Length(%)" name="summary_length" min="1" value="30" required><br><br>
        </div>
        <div class="flex space-x-1 justify-start">
            <button class="bg-cyan-900 pointer-cursor hover:bg-cyan-700 text-white p-3 rounded-lg" type="submit">
                <span>Summarize</span>
                {% if session.get('loading') == True %}
                    <span class="animate-spin"><svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <path d="M7.706 0.290 C 7.484 0.362,7.356 0.490,7.294 0.699 C 7.259 0.816,7.253 1.088,7.253 2.508 C 7.253 4.389,7.251 4.365,7.443 4.557 C 7.700 4.813,8.300 4.813,8.557 4.557 C 8.749 4.365,8.747 4.389,8.747 2.508 C 8.747 0.688,8.744 0.656,8.596 0.480 C 8.472 0.333,8.339 0.284,8.040 0.276 C 7.893 0.272,7.743 0.278,7.706 0.290 M2.753 2.266 C 2.595 2.338,2.362 2.566,2.281 2.728 C 2.197 2.897,2.193 3.085,2.269 3.253 C 2.343 3.418,4.667 5.750,4.850 5.843 C 5.109 5.976,5.375 5.911,5.643 5.649 C 5.907 5.391,5.977 5.111,5.843 4.850 C 5.750 4.667,3.418 2.343,3.253 2.269 C 3.101 2.200,2.901 2.199,2.753 2.266 M12.853 2.282 C 12.730 2.339,12.520 2.536,11.518 3.541 C 10.597 4.464,10.316 4.762,10.271 4.860 C 10.195 5.025,10.196 5.216,10.272 5.378 C 10.342 5.528,10.572 5.764,10.727 5.845 C 10.884 5.927,11.117 5.926,11.280 5.843 C 11.447 5.757,13.757 3.447,13.843 3.280 C 13.926 3.118,13.927 2.884,13.846 2.729 C 13.764 2.572,13.552 2.364,13.392 2.283 C 13.213 2.192,13.048 2.192,12.853 2.282 M0.699 7.292 C 0.404 7.385,0.258 7.620,0.258 7.999 C 0.259 8.386,0.403 8.618,0.698 8.706 C 0.816 8.741,1.079 8.747,2.508 8.747 C 3.997 8.747,4.196 8.742,4.318 8.702 C 4.498 8.644,4.644 8.498,4.702 8.318 C 4.788 8.053,4.745 7.677,4.608 7.491 C 4.578 7.451,4.492 7.384,4.417 7.343 L 4.280 7.267 2.547 7.261 C 1.152 7.257,0.791 7.263,0.699 7.292 M11.745 7.278 C 11.622 7.308,11.452 7.411,11.392 7.492 C 11.255 7.677,11.212 8.053,11.298 8.318 C 11.356 8.498,11.502 8.644,11.682 8.702 C 11.804 8.742,12.003 8.747,13.492 8.747 C 14.921 8.747,15.184 8.741,15.302 8.706 C 15.597 8.618,15.741 8.386,15.742 7.999 C 15.742 7.614,15.595 7.383,15.290 7.291 C 15.187 7.260,14.864 7.254,13.496 7.256 C 12.578 7.258,11.790 7.268,11.745 7.278 M4.853 10.282 C 4.730 10.339,4.520 10.536,3.518 11.541 C 2.597 12.464,2.316 12.762,2.271 12.860 C 2.195 13.025,2.196 13.216,2.272 13.378 C 2.342 13.528,2.572 13.764,2.727 13.845 C 2.884 13.927,3.117 13.926,3.280 13.843 C 3.447 13.757,5.757 11.447,5.843 11.280 C 5.926 11.118,5.927 10.884,5.846 10.729 C 5.764 10.572,5.552 10.364,5.392 10.283 C 5.213 10.192,5.048 10.192,4.853 10.282 M10.753 10.266 C 10.595 10.338,10.362 10.566,10.281 10.728 C 10.197 10.897,10.193 11.085,10.269 11.253 C 10.343 11.418,12.667 13.750,12.850 13.843 C 13.109 13.976,13.375 13.911,13.643 13.649 C 13.907 13.391,13.977 13.111,13.843 12.850 C 13.750 12.667,11.418 10.343,11.253 10.269 C 11.101 10.200,10.901 10.199,10.753 10.266 M7.745 11.277 C 7.620 11.309,7.451 11.412,7.392 11.492 C 7.254 11.678,7.253 11.691,7.253 13.489 C 7.253 14.921,7.259 15.184,7.294 15.302 C 7.382 15.597,7.615 15.741,8.000 15.741 C 8.385 15.741,8.618 15.597,8.706 15.302 C 8.768 15.090,8.767 11.875,8.704 11.690 C 8.644 11.514,8.575 11.430,8.420 11.346 C 8.310 11.286,8.246 11.271,8.057 11.264 C 7.930 11.259,7.790 11.265,7.745 11.277 "
                              stroke="none" fill-rule="evenodd" fill="#ffffff"></path>
                    </g>
                    </svg></span>
                {% endif %}
            </button>
        </div>
    </form>
</div>
<script>
    const modalButton = document.getElementById('modal-btn');
    const closeModalButton = document.getElementById('modal-close-btn');
    const modal = document.getElementById('modal');
    const submit = document.getElementById('submit');
    const handleShowModal = () => {
        modal.classList.remove('hidden');
        console.log(modal);
    }
    const handleHideModal = () => {
        modal.classList.add('hidden');
    }
    modalButton.addEventListener('click', handleShowModal);
    closeModalButton.addEventListener('click', handleHideModal);
    submit.addEventListener('click', handleHideModal);
</script>
</body>
</html>
